{% extends "base.html" %}
{% block title %}Perguntas — {{ camp.title }}{% endblock %}
{% block page_title %}<i class="bi bi-list-check me-1"></i>Perguntas da campanha — {{ camp.title }}{% endblock %}
{% block content %}
<div class="container py-3">
  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <form method="post">
        <div class="row g-3">
          <div class="col-md-8">
            <label class="form-label">Pergunta</label>
            <input class="form-control" name="text" placeholder="Ex.: Quão fácil foi importar o XML?" required>
          </div>
          <div class="col-md-2">
            <label class="form-label">Ordem</label>
            <input class="form-control" type="number" name="order" value="0">
          </div>
          <div class="col-md-2 d-flex align-items-end">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="required" id="req" checked>
              <label class="form-check-label" for="req">Obrigatória</label>
            </div>
          </div>
        </div>
        <div class="mt-3 text-end">
          <button class="btn btn-primary"><i class="bi bi-plus-lg"></i> Adicionar</button>
        </div>
      </form>
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-sm mb-0">
        <thead class="table-light"><tr><th>#</th><th>Pergunta</th><th>Ordem</th><th>Obrigatória</th><th class="text-end">Ações</th></tr></thead>
        <tbody>
          {% for q in camp.questions %}
          <tr>
            <td class="text-muted">{{ q.id }}</td>
            <td>{{ q.text }}</td>
            <td>{{ q.order }}</td>
            <td>{% if q.required %}<span class="badge bg-info">Sim</span>{% else %}<span class="badge bg-secondary">Não</span>{% endif %}</td>
            <td class="text-end">
              <form method="post" action="{{ url_for('support_admin.question_delete', id=q.id) }}" onsubmit="return confirm('Excluir pergunta?')" class="d-inline">
                <button class="btn btn-outline-danger btn-sm"><i class="bi bi-trash"></i></button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr><td colspan="5" class="text-muted">Sem perguntas ainda.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
