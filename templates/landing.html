{# templates/landing.html #}
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Oraculo ICMS — Substituição Tributária sem dor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background:#ffffff; }
    .hero { background: radial-gradient(1200px 600px at 10% 10%, #eef2ff, transparent), radial-gradient(1200px 600px at 90% 0%, #f0f9ff, transparent); }
    .pricing .card { border-radius:1rem; }
    .feature-icon { width:48px; height:48px; display:grid; place-content:center; border-radius:12px; background:#f3f4f6; }
    .logo { font-weight:800; letter-spacing:.03em; }
    .price-lg { font-size:2.2rem; font-weight:700; line-height:1; }
    .muted { color:#6c757d; }
    .testimonial { min-height: 140px; }
    .badge-trial { font-size:.75rem; }
  </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
  <div class="container">
    <a class="navbar-brand logo" href="{{ url_for('core.index') }}">Oraculo ICMS</a>

    <div class="ms-auto d-flex gap-2">
      {% if session.get('user') %}
        <a class="btn btn-primary" href="{{ url_for('core.dashboard') }}"><i class="bi bi-speedometer2 me-1"></i> Abrir sistema</a>
        <a class="btn btn-outline-secondary" href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-right me-1"></i> Sair</a>
      {% else %}
        <a class="btn btn-outline-primary" href="{{ url_for('auth.login') }}">Login</a>
        <a class="btn btn-primary" href="{{ url_for('auth.register') }}">Criar conta</a>
      {% endif %}
    </div>
  </div>
</nav>

<header class="hero py-5">
  <div class="container">
    <div class="row align-items-center g-4">
      <div class="col-lg-6">
        <h1 class="display-6 fw-bold">Cálculo de ICMS-ST para a ZFM sem planilhas quebradas</h1>
        <p class="lead text-muted">Envie a NF-e, confira a prévia, aplique regras e gere a memória de cálculo. Integração com planilhas, atualização automática de regras e PDFs bonitos.</p>
        <div class="d-flex gap-2">
          {% if session.get('user') %}
            <a class="btn btn-primary btn-lg" href="{{ url_for('core.dashboard') }}"><i class="bi bi-rocket-takeoff me-1"></i>Ir para o sistema</a>
          {% else %}
            <a class="btn btn-primary btn-lg" href="{{ url_for('auth.register') }}"><i class="bi bi-rocket-takeoff me-1"></i>Começar agora</a>
            <a class="btn btn-outline-secondary btn-lg" href="#plans">Ver planos</a>
          {% endif %}
        </div>
      </div>
      <div class="col-lg-6">
        <img class="img-fluid rounded shadow" alt="print" src="https://picsum.photos/960/520?random=42">
      </div>
    </div>
  </div>
</header>

<section id="pains" class="py-5">
  <div class="container">
    <h2 class="h4 mb-3">Dores que a gente resolve</h2>
    <div class="row g-3">
      <div class="col-md-4"><div class="card h-100"><div class="card-body">
        <div class="feature-icon mb-2"><i class="bi bi-exclamation-triangle"></i></div>
        <h5>Resultados divergentes</h5>
        <p class="text-muted">Diferenças entre planilha, DANFE e recolhimento? O motor padroniza regras e mostra a memória do cálculo.</p>
      </div></div></div>
      <div class="col-md-4"><div class="card h-100"><div class="card-body">
        <div class="feature-icon mb-2"><i class="bi bi-clock-history"></i></div>
        <h5>Atualização trabalhosa</h5>
        <p class="text-muted">Parâmetros e MVA atualizados automaticamente a partir da sua matriz (Sheets).</p>
      </div></div></div>
      <div class="col-md-4"><div class="card h-100"><div class="card-body">
        <div class="feature-icon mb-2"><i class="bi bi-filetype-pdf"></i></div>
        <h5>Relatórios frágeis</h5>
        <p class="text-muted">Gere PDFs claros com a memória de cálculo para auditoria e compliance.</p>
      </div></div></div>
    </div>
  </div>
</section>

<section id="features" class="py-5 bg-light">
  <div class="container">
    <h2 class="h4 mb-3">Funcionalidades</h2>
    <div class="row g-3">
      <div class="col-md-6 col-lg-4"><div class="list-group">
        <div class="list-group-item"><i class="bi bi-upload me-2"></i>Importação de XML/NF-e</div>
        <div class="list-group-item"><i class="bi bi-table me-2"></i>Pré-visualização rica</div>
        <div class="list-group-item"><i class="bi bi-calculator me-2"></i>Motor de ICMS-ST configurável</div>
        <div class="list-group-item"><i class="bi bi-google me-2"></i>Integração Google Sheets</div>
      </div></div>
      <div class="col-md-6 col-lg-4"><div class="list-group">
        <div class="list-group-item"><i class="bi bi-cloud-arrow-down me-2"></i>Atualizações automáticas de MVA</div>
        <div class="list-group-item"><i class="bi bi-clipboard-data me-2"></i>Dashboard e métricas</div>
        <div class="list-group-item"><i class="bi bi-person-gear me-2"></i>Perfis e planos</div>
        <div class="list-group-item"><i class="bi bi-credit-card me-2"></i>Checkout seguro</div>
      </div></div>
      <div class="col-md-12 col-lg-4">
        <img class="img-fluid rounded shadow" alt="print 2" src="https://picsum.photos/960/560?random=55">
      </div>
    </div>
  </div>
</section>

<section id="plans" class="py-5 pricing">
  <div class="container">
    <h2 class="h4 mb-4 text-center">Planos e preços</h2>

    {% if plans %}
    <div class="row g-3">
      {% for p in plans if p.active %}
      {% set price_m = ((p.price_month_cents or 0) / 100.0) %}
      {% set price_y = ((p.price_year_cents or 0) / 100.0) %}
      <div class="col-md-4">
        <div class="card h-100 shadow-sm">
          <div class="card-body d-flex flex-column">
            <h5 class="mb-1">{{ p.name }}</h5>

            {% if price_m > 0 %}
              <div class="price-lg">R$ {{ '%.0f' % price_m }}<span class="fs-6 fw-normal">/mês</span></div>
            {% else %}
              <div class="price-lg">R$ 0<span class="fs-6 fw-normal">/mês</span></div>
            {% endif %}

            {% if price_y > 0 %}
              <div class="muted">ou R$ {{ '%.0f' % price_y }}/ano</div>
            {% endif %}

            {% if p.trial_days %}
              <div class="mt-2">
                <span class="badge bg-success badge-trial">Teste grátis {{ p.trial_days }} dias</span>
              </div>
            {% endif %}

            {% if p.description_md %}
              <div class="mt-3 text-muted" style="white-space:pre-wrap">{{ p.description_md }}</div>
            {% endif %}

            <div class="mt-auto pt-3">
              {% if session.get('user') %}
                <a class="btn btn-primary w-100" href="{{ url_for('billing.checkout_choose') }}">Assinar</a>
              {% else %}
                <a class="btn btn-outline-primary w-100" href="{{ url_for('auth.register') }}">Assinar</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <div class="alert alert-warning">Nenhum plano disponível no momento.</div>
    {% endif %}
  </div>
</section>

<section id="reviews" class="py-5 bg-light">
  <div class="container">
    <h2 class="h4 mb-3">O que dizem nossos clientes</h2>

    <div class="row g-3">
      {% for t in testimonials %}
      <div class="col-md-4">
        <div class="card h-100 testimonial">
          <div class="card-body d-flex flex-column">
            <p class="mb-2">“{{ t.message }}”</p>
            <div class="text-muted small mt-auto">— {{ t.name }}{% if t.company %}, {{ t.company }}{% endif %}</div>
          </div>
        </div>
      </div>
      {% endfor %}
      {% if not testimonials %}
        <div class="col-12 text-muted">Ainda não temos depoimentos publicados.</div>
      {% endif %}
    </div>

    <div class="text-end mt-3">
      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('core.support') }}"><i class="bi bi-chat-quote me-1"></i>Enviar um elogio</a>
    </div>
  </div>
</section>

<footer id="about" class="py-4 border-top">
  <div class="container d-flex justify-content-between">
    <div><strong>Oraculo ICMS</strong> — tecnologia para quem lida com ICMS-ST todos os dias.</div>
    <div class="text-muted">© {{ 2025 }} Oraculo ICMS</div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
